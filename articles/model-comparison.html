<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="barrks">
<title>Example: Model comparison • barrks</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.11/clipboard.min.js" integrity="sha512-7O5pXpc0oCRrxk8RUfDYFgn0nO1t+jLuIOQdOMRp4APB7uZ4vSjspzp5y6YDtDs4VzUSTbWzBFZ/LKJhnyFOKw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet">
<meta property="og:title" content="Example: Model comparison">
<meta property="og:description" content="barrks">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light" data-bs-theme="light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">barrks</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.9.0.8</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/bso.html">The BSO model</a>
    <a class="dropdown-item" href="../articles/model-comparison.html">Example: Model comparison</a>
    <a class="dropdown-item" href="../articles/model-customization.html">Model customization</a>
    <a class="dropdown-item" href="../articles/stations.html">Station data</a>
    <a class="dropdown-item" href="../articles/storage.html">Use a storage</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/jjentschke/barrks/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Example: Model comparison</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/jjentschke/barrks/blob/HEAD/vignettes/model-comparison.Rmd" class="external-link"><code>vignettes/model-comparison.Rmd</code></a></small>
      <div class="d-none name"><code>model-comparison.Rmd</code></div>
    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://jjentschke.github.io/barrks/" class="external-link">barrks</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyverse.tidyverse.org" class="external-link">tidyverse</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://rspatial.org/" class="external-link">terra</a></span><span class="op">)</span></span>
<span></span>
<span></span>
<span><span class="co"># function to unify the appearance of raster plots</span></span>
<span><span class="va">my_rst_plot</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">rst</span>, <span class="va">...</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rspatial.github.io/terra/reference/plot.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">rst</span>, mar <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.2</span>, <span class="fl">0.1</span>, <span class="fl">2</span>, <span class="fl">5</span><span class="op">)</span>,</span>
<span>       axes <span class="op">=</span> <span class="cn">FALSE</span>, box <span class="op">=</span> <span class="cn">TRUE</span>, nr <span class="op">=</span> <span class="fl">1</span>,</span>
<span>       cex.main <span class="op">=</span> <span class="fl">1.9</span>, plg <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>cex <span class="op">=</span> <span class="fl">1.8</span><span class="op">)</span>, <span class="va">...</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
<div class="section level2">
<h2 id="calculate-phenology">Calculate phenology<a class="anchor" aria-label="anchor" href="#calculate-phenology"></a>
</h2>
<p>In this vignette, the sample data delivered with <code>barrks</code>
is used to calculate the phenology with all models available in the
package. Note that the daylength threshold for diapause initiation of
the Jönsson model is adapted to Central Europe according to <span class="citation">Baier, Pennerstorfer, and Schopf (2007)</span>.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="va">data</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/barrks_data.html">barrks_data</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># calculate phenology</span></span>
<span><span class="va">phenos</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">'phenips-clim'</span> <span class="op">=</span> <span class="fu"><a href="../reference/phenology.html">phenology</a></span><span class="op">(</span><span class="st">'phenips-clim'</span>, <span class="va">data</span><span class="op">)</span>,</span>
<span>               <span class="st">'phenips'</span> <span class="op">=</span> <span class="fu"><a href="../reference/phenology.html">phenology</a></span><span class="op">(</span><span class="st">'phenips'</span>, <span class="va">data</span><span class="op">)</span>,</span>
<span>               <span class="st">'rity'</span> <span class="op">=</span> <span class="fu"><a href="../reference/phenology.html">phenology</a></span><span class="op">(</span><span class="st">'rity'</span>, <span class="va">data</span><span class="op">)</span>,</span>
<span>               <span class="st">'lange'</span> <span class="op">=</span> <span class="fu"><a href="../reference/phenology.html">phenology</a></span><span class="op">(</span><span class="st">'lange'</span>, <span class="va">data</span><span class="op">)</span>,</span>
<span>               <span class="co"># customize the Jönsson model for Central Europe</span></span>
<span>               <span class="st">'joensson'</span> <span class="op">=</span> <span class="fu"><a href="../reference/phenology.html">phenology</a></span><span class="op">(</span><span class="fu"><a href="../reference/model.html">model</a></span><span class="op">(</span><span class="st">'joensson'</span>, daylength_dia <span class="op">=</span> <span class="fl">14.5</span><span class="op">)</span>, <span class="va">data</span><span class="op">)</span>,</span>
<span>               <span class="st">'bso'</span> <span class="op">=</span> <span class="fu"><a href="../reference/phenology.html">bso_phenology</a></span><span class="op">(</span>.data <span class="op">=</span> <span class="va">data</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="../reference/bso_translate_phenology.html">bso_translate_phenology</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>               <span class="st">'chapy'</span> <span class="op">=</span> <span class="fu"><a href="../reference/phenology.html">phenology</a></span><span class="op">(</span><span class="st">'chapy'</span>, <span class="va">data</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="spatial-outputs">Spatial outputs<a class="anchor" aria-label="anchor" href="#spatial-outputs"></a>
</h2>
<p><code>barrks</code> provides different functions to examine the
results of the phenology calculations. This section describes the
application of the basic functions that return spatial outputs.</p>
<div class="section level3">
<h3 id="day-of-year-rasters">Day-of-year-rasters<a class="anchor" aria-label="anchor" href="#day-of-year-rasters"></a>
</h3>
<p>The onset of infestation, initiation of diapause and the
frost-induced mortality are described as the corresponding day of year.
That data can be attained via <code><a href="../reference/get_events.html">get_onset_rst()</a></code>,
<code><a href="../reference/get_events.html">get_diapause_rst()</a></code> or <code><a href="../reference/get_events.html">get_mortality_rst()</a></code>. As
some models have not all submodels implemented and
<code><a href="https://rspatial.github.io/terra/reference/panel.html" class="external-link">terra::panel()</a></code> does not allow adding empty rasters, a
workaround-function is defined to plot the the respective submodel
outputs. Additionally, it draws the borders of the area of interest.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span></span>
<span><span class="va">plot_doy_panel</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">{</span></span>
<span></span>
<span>  <span class="va">aoi</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rspatial.github.io/terra/reference/as.polygons.html" class="external-link">as.polygons</a></span><span class="op">(</span><span class="va">data</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span> <span class="op">*</span> <span class="fl">0</span><span class="op">)</span></span>
<span></span>
<span>  <span class="va">draw_aoi_borders</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">i</span><span class="op">)</span> <span class="op">{</span></span>
<span></span>
<span>    <span class="kw">if</span><span class="op">(</span><span class="va">empty</span><span class="op">[</span><span class="va">i</span><span class="op">]</span><span class="op">)</span> <span class="fu"><a href="https://rspatial.github.io/terra/reference/lines.html" class="external-link">polys</a></span><span class="op">(</span><span class="va">aoi</span>, lwd <span class="op">=</span> <span class="fl">2</span>, col <span class="op">=</span> <span class="st">'white'</span><span class="op">)</span></span>
<span>    <span class="kw">else</span> <span class="fu"><a href="https://rspatial.github.io/terra/reference/lines.html" class="external-link">polys</a></span><span class="op">(</span><span class="va">aoi</span>, lwd <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span>
<span>  <span class="op">}</span></span>
<span></span>
<span>  <span class="co"># replace NULL by a raster with values in the overall range to not affect the legend</span></span>
<span>  <span class="co"># the raster will be overplotted by `draw_aoi_borders()`</span></span>
<span>  <span class="va">rst_tmp</span> <span class="op">&lt;-</span> <span class="va">data</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span> <span class="op">*</span> <span class="fl">0</span> <span class="op">+</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">min</a></span><span class="op">(</span><span class="fu"><a href="https://rspatial.github.io/terra/reference/minmax.html" class="external-link">minmax</a></span><span class="op">(</span><span class="fu"><a href="https://rspatial.github.io/terra/reference/rast.html" class="external-link">rast</a></span><span class="op">(</span><span class="fu"><a href="https://purrr.tidyverse.org/reference/keep.html" class="external-link">discard</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">is.null</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">[</span><span class="fl">1</span>,<span class="op">]</span><span class="op">)</span></span>
<span>  <span class="va">empty</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://purrr.tidyverse.org/reference/map.html" class="external-link">map_lgl</a></span><span class="op">(</span><span class="va">x</span>, \<span class="op">(</span><span class="va">y</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/base/NULL.html" class="external-link">is.null</a></span><span class="op">(</span><span class="va">y</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="fu"><a href="https://purrr.tidyverse.org/reference/map.html" class="external-link">walk</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/which.html" class="external-link">which</a></span><span class="op">(</span><span class="va">empty</span><span class="op">)</span>, \<span class="op">(</span><span class="va">i</span><span class="op">)</span> <span class="va">x</span><span class="op">[[</span><span class="va">i</span><span class="op">]</span><span class="op">]</span> <span class="op">&lt;&lt;-</span> <span class="va">rst_tmp</span><span class="op">)</span></span>
<span></span>
<span>  <span class="fu"><a href="https://rspatial.github.io/terra/reference/panel.html" class="external-link">panel</a></span><span class="op">(</span><span class="fu"><a href="https://rspatial.github.io/terra/reference/rast.html" class="external-link">rast</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span>,</span>
<span>        <span class="fu"><a href="https://rspatial.github.io/terra/reference/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span>,</span>
<span>        col <span class="op">=</span> <span class="fu">viridisLite</span><span class="fu">::</span><span class="fu"><a href="https://sjmgarnier.github.io/viridisLite/reference/viridis.html" class="external-link">viridis</a></span><span class="op">(</span><span class="fl">100</span>, direction <span class="op">=</span> <span class="op">-</span><span class="fl">1</span><span class="op">)</span>,</span>
<span>        axes <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>        box <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>        loc.main <span class="op">=</span> <span class="st">'topright'</span>,</span>
<span>        fun <span class="op">=</span> <span class="va">draw_aoi_borders</span>,</span>
<span>        cex.main <span class="op">=</span> <span class="fl">1.9</span>,</span>
<span>        plg <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>cex <span class="op">=</span> <span class="fl">1.8</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="fu">plot_doy_panel</span><span class="op">(</span><span class="fu"><a href="https://purrr.tidyverse.org/reference/map.html" class="external-link">map</a></span><span class="op">(</span><span class="va">phenos</span>, \<span class="op">(</span><span class="va">p</span><span class="op">)</span> <span class="fu"><a href="../reference/get_events.html">get_onset_rst</a></span><span class="op">(</span><span class="va">p</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu">plot_doy_panel</span><span class="op">(</span><span class="fu"><a href="https://purrr.tidyverse.org/reference/map.html" class="external-link">map</a></span><span class="op">(</span><span class="va">phenos</span>, \<span class="op">(</span><span class="va">p</span><span class="op">)</span> <span class="fu"><a href="../reference/get_events.html">get_diapause_rst</a></span><span class="op">(</span><span class="va">p</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu">plot_doy_panel</span><span class="op">(</span><span class="fu"><a href="https://purrr.tidyverse.org/reference/map.html" class="external-link">map</a></span><span class="op">(</span><span class="va">phenos</span>, \<span class="op">(</span><span class="va">p</span><span class="op">)</span> <span class="fu"><a href="../reference/get_events.html">get_mortality_rst</a></span><span class="op">(</span><span class="va">p</span><span class="op">)</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<div class="figure">
<img src="figures/model-comparison-onset-1.png" alt="Day of year when the infestation begins" width="100%"><p class="caption">
Day of year when the infestation begins
</p>
</div>
<div class="figure">
<img src="figures/model-comparison-diapause-1.png" alt="Day of year when the diapause begins (in white cells no diapause was induced)" width="100%"><p class="caption">
Day of year when the diapause begins (in white cells no diapause was
induced)
</p>
</div>
<div class="figure">
<img src="figures/model-comparison-mortality-1.png" alt="Day of year of the first frost-induced mortality event in autumn/winter (in white cells no mortality occured)" width="100%"><p class="caption">
Day of year of the first frost-induced mortality event in autumn/winter
(in white cells no mortality occured)
</p>
</div>
</div>
<div class="section level3">
<h3 id="generations">Generations<a class="anchor" aria-label="anchor" href="#generations"></a>
</h3>
<p>To get an overview of the establishment of generations, it is
possible to plot the prevailing generations on different dates using
<code><a href="../reference/get_generations.html">get_generations_rst()</a></code> and <code>my_rst_plot()</code>.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co"># dates to plot</span></span>
<span><span class="va">dates</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'2015-04-15'</span>, <span class="st">'2015-06-15'</span>, <span class="st">'2015-08-15'</span>, <span class="st">'2015-10-15'</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># walk through all phenology models</span></span>
<span><span class="fu"><a href="https://purrr.tidyverse.org/reference/map.html" class="external-link">walk</a></span><span class="op">(</span><span class="fu"><a href="https://rspatial.github.io/terra/reference/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">phenos</span><span class="op">)</span>, \<span class="op">(</span><span class="va">key</span><span class="op">)</span> <span class="op">{</span></span>
<span></span>
<span>  <span class="va">p</span> <span class="op">&lt;-</span> <span class="va">phenos</span><span class="op">[[</span><span class="va">key</span><span class="op">]</span><span class="op">]</span></span>
<span></span>
<span>  <span class="co"># plot generations of current model</span></span>
<span>  <span class="fu"><a href="../reference/get_generations.html">get_generations_rst</a></span><span class="op">(</span><span class="va">p</span>, <span class="va">dates</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu">my_rst_plot</span><span class="op">(</span>main <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">key</span>, <span class="st">'-'</span>, <span class="va">dates</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">}</span><span class="op">)</span></span></code></pre></div>
<div class="figure">
<img src="figures/model-comparison-gens-phenips-clim-1.png" alt="Generations calculated by PHENIPS-Clim" width="100%"><p class="caption">
Generations calculated by PHENIPS-Clim
</p>
</div>
<div class="figure">
<img src="figures/model-comparison-gens-phenips-1.png" alt="Generations calculated by PHENIPS" width="100%"><p class="caption">
Generations calculated by PHENIPS
</p>
</div>
<div class="figure">
<img src="figures/model-comparison-gens-rity-1.png" alt="Generations calculated by RITY" width="100%"><p class="caption">
Generations calculated by RITY
</p>
</div>
<div class="figure">
<img src="figures/model-comparison-gens-lange-1.png" alt="Generations calculated by the Lange model" width="100%"><p class="caption">
Generations calculated by the Lange model
</p>
</div>
<div class="figure">
<img src="figures/model-comparison-gens-joensson-1.png" alt="Generations calculated by the Jönsson model" width="100%"><p class="caption">
Generations calculated by the Jönsson model
</p>
</div>
<div class="figure">
<img src="figures/model-comparison-gens-bso-1.png" alt="Generations calculated by BSO" width="100%"><p class="caption">
Generations calculated by BSO
</p>
</div>
<div class="figure">
<img src="figures/model-comparison-gens-chapy-1.png" alt="Generations calculated by CHAPY" width="100%"><p class="caption">
Generations calculated by CHAPY
</p>
</div>
</div>
</div>
<div class="section level2">
<h2 id="stationwise-outputs">Stationwise outputs<a class="anchor" aria-label="anchor" href="#stationwise-outputs"></a>
</h2>
<p>To plot the development diagrams of particular raster cells, stations
can be defined by specifying their cell numbers. To get the stations’
coordinates, <code><a href="https://rspatial.github.io/terra/reference/xyCellFrom.html" class="external-link">terra::xyFromCell</a></code> can be used.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a></span>
<span id="cb5-2"><a href="#cb5-2" tabindex="-1"></a><span class="co"># plot the locations of the stations</span></span>
<span id="cb5-3"><a href="#cb5-3" tabindex="-1"></a></span>
<span id="cb5-4"><a href="#cb5-4" tabindex="-1"></a>rst_aoi <span class="ot">&lt;-</span> data[[<span class="dv">1</span>]][[<span class="dv">1</span>]] <span class="sc">*</span> <span class="dv">0</span></span>
<span id="cb5-5"><a href="#cb5-5" tabindex="-1"></a>stations <span class="ot">&lt;-</span> <span class="fu">stations_create</span>(<span class="fu">c</span>(<span class="st">'station 1'</span>, <span class="st">'station 2'</span>), <span class="fu">c</span>(<span class="dv">234</span> <span class="dv">345</span>))</span>
<span id="cb5-6"><a href="#cb5-6" tabindex="-1"></a>station_coords <span class="ot">&lt;-</span> <span class="fu">vect</span>(<span class="fu">xyFromCell</span>(rst_aoi, <span class="fu">stations_cells</span>(stations)))</span>
<span id="cb5-7"><a href="#cb5-7" tabindex="-1"></a></span>
<span id="cb5-8"><a href="#cb5-8" tabindex="-1"></a><span class="fu">plot</span>(rst_aoi,  <span class="at">col =</span> <span class="st">'#AAAAAA'</span>, <span class="at">legend =</span> <span class="cn">FALSE</span>, <span class="at">axes =</span> <span class="cn">FALSE</span>, <span class="at">box =</span> <span class="cn">TRUE</span>)</span>
<span id="cb5-9"><a href="#cb5-9" tabindex="-1"></a><span class="fu">plot</span>(station_coords, <span class="at">col =</span> <span class="st">'red'</span>, <span class="at">pch =</span> <span class="dv">4</span>, <span class="at">add =</span> <span class="cn">TRUE</span>)</span>
<span id="cb5-10"><a href="#cb5-10" tabindex="-1"></a><span class="fu">text</span>(station_coords, <span class="fu">names</span>(stations), <span class="at">col =</span> <span class="st">'black'</span>, <span class="at">pos =</span> <span class="dv">2</span>)</span></code></pre></div>
<div class="figure">
<img src="figures/model-comparison-stations-map-1.png" alt="Stations map" width="100%"><p class="caption">
Stations map
</p>
</div>
<p>The stations should be passed to
<code><a href="../reference/plot_development_diagram.html">plot_development_diagram()</a></code> to get the desired plots. Here,
only the models PHENIPS-Clim and PHENIPS are plotted to reduce the
complexity of the diagrams.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># plot the development diagrams</span></span>
<span></span>
<span><span class="va">limits</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'2015-04-01'</span>, <span class="st">'2015-12-31'</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">models</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'phenips-clim'</span>, <span class="st">'phenips'</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://purrr.tidyverse.org/reference/map.html" class="external-link">walk</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">stations</span><span class="op">)</span>, \<span class="op">(</span><span class="va">i</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="../reference/plot_development_diagram.html">plot_development_diagram</a></span><span class="op">(</span><span class="va">phenos</span><span class="op">[</span><span class="va">models</span><span class="op">]</span>,</span>
<span>                           <span class="va">stations</span><span class="op">[</span><span class="va">i</span><span class="op">]</span>,</span>
<span>                           .lty <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">models</span><span class="op">)</span>,</span>
<span>                           .group <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>                           xlim <span class="op">=</span> <span class="va">limits</span><span class="op">)</span></span>
<span><span class="op">}</span><span class="op">)</span></span></code></pre></div>
<div class="figure">
<img src="figures/model-comparison-dev-s1-1.png" alt="Development diagram for station 1" width="100%"><p class="caption">
Development diagram for station 1
</p>
</div>
<div class="figure">
<img src="figures/model-comparison-dev-s2-1.png" alt="Development diagram for station 2" width="100%"><p class="caption">
Development diagram for station 2
</p>
</div>
<div id="refs" class="references csl-bib-body hanging-indent">
<div id="ref-Baier2007" class="csl-entry">
Baier, Peter, Josef Pennerstorfer, and Axel Schopf. 2007. <span>“<span class="nocase">PHENIPS—A comprehensive phenology model of <em>Ips
typographus</em> (L.)(Col., Scolytinae) as a tool for hazard rating of
bark beetle infestation</span>.”</span> <em>Forest Ecology and
Management</em> 249 (3): 171–86. <a href="https://doi.org/10.1016/j.foreco.2007.05.020" class="external-link">https://doi.org/10.1016/j.foreco.2007.05.020</a>.
</div>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Jakob Jentschke, FVA BW, Abt. Waldschutz.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.9.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
