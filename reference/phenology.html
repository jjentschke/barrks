<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Central function to calculate a phenology — phenology • barrks</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet"><meta property="og:title" content="Central function to calculate a phenology — phenology"><meta name="description" content="Calculate a phenology (or its subparts) with a specific model."><meta property="og:description" content="Calculate a phenology (or its subparts) with a specific model."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">barrks</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.1.1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/bso.html">The BSO model</a></li>
    <li><a class="dropdown-item" href="../articles/model-comparison.html">Example: Model comparison</a></li>
    <li><a class="dropdown-item" href="../articles/model-customization.html">Model customization</a></li>
    <li><a class="dropdown-item" href="../articles/stations.html">Station data</a></li>
    <li><a class="dropdown-item" href="../articles/storage.html">Use a storage</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/jjentschke/barrks/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Central function to calculate a phenology</h1>
      <small class="dont-index">Source: <a href="https://github.com/jjentschke/barrks/blob/HEAD/R/phenology.R" class="external-link"><code>R/phenology.R</code></a>, <a href="https://github.com/jjentschke/barrks/blob/HEAD/R/bso-phenology.R" class="external-link"><code>R/bso-phenology.R</code></a></small>
      <div class="d-none name"><code>phenology.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Calculate a phenology (or its subparts) with a specific model.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">phenology</span><span class="op">(</span></span>
<span>  <span class="va">.model</span>,</span>
<span>  .data <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  .dates <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  .win <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  .ext <span class="op">=</span> <span class="st">"tif"</span>,</span>
<span>  .onset <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  .diapause <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  .mortality <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  .submodels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"onset"</span>, <span class="st">"diapause"</span>, <span class="st">"mortality"</span>, <span class="st">"development"</span><span class="op">)</span>,</span>
<span>  .setup_only <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  .stations <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  .storage <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  .quiet <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">bso_phenology</span><span class="op">(</span></span>
<span>  .model <span class="op">=</span> <span class="st">"bso"</span>,</span>
<span>  .data <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  .dates <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  .win <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  .ext <span class="op">=</span> <span class="st">"tif"</span>,</span>
<span>  .onset <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  .diapause <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  .mortality <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  .submodels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"onset"</span>, <span class="st">"diapause"</span>, <span class="st">"mortality"</span>, <span class="st">"development"</span><span class="op">)</span>,</span>
<span>  .setup_only <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  .stations <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  .storage <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  .quiet <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg--model">.model<a class="anchor" aria-label="anchor" href="#arg--model"></a></dt>
<dd><p>A phenology model or a model name (see <code><a href="model.html">model()</a></code>,
<code><a href="model_combine.html">model_combine()</a></code>).</p></dd>


<dt id="arg--data">.data<a class="anchor" aria-label="anchor" href="#arg--data"></a></dt>
<dd><p>Data that will be passed to the model. It can be one of the following:</p><ul><li><p>Character string: The raster data will be loaded from the path specified.
The files have to be named like the respective model inputs.</p></li>
<li><p>Named list: Each element contains the input data according to its name.</p></li>
<li><p>Data frame (station data): Should have the columns <code>date</code> and <code>station</code>
(name of the station). Additional columns have to be named like the
respective model inputs.</p></li>
<li><p>Additionally, data can be passed through the ... argument.</p></li>
</ul><p>Look at the model application manuals to find out which inputs are required
by a specific model: <code><a href="model.bso.apply.html">model.bso.apply</a></code>, <code><a href="model.phenips.apply.html">model.phenips.apply</a></code>, <code><a href="model.rity.apply.html">model.rity.apply</a></code>, <code><a href="model.chapy.apply.html">model.chapy.apply</a></code>, <code><a href="model.joensson.apply.html">model.joensson.apply</a></code>, <code><a href="model.lange.apply.html">model.lange.apply</a></code>, <code><a href="model.phenips_clim.apply.html">model.phenips_clim.apply</a></code>.</p></dd>


<dt id="arg--dates">.dates<a class="anchor" aria-label="anchor" href="#arg--dates"></a></dt>
<dd><p>Vector of dates that the data should be restricted to.</p></dd>


<dt id="arg--win">.win<a class="anchor" aria-label="anchor" href="#arg--win"></a></dt>
<dd><p>SpatExtent to set a window (area of interest) if <code>.data</code> is a
path to load the raster data from.</p></dd>


<dt id="arg--ext">.ext<a class="anchor" aria-label="anchor" href="#arg--ext"></a></dt>
<dd><p>Extension of the files that should be used if <code>.data</code> is a path
to load the raster data from.</p></dd>


<dt id="arg--onset-diapause-mortality">.onset, .diapause, .mortality<a class="anchor" aria-label="anchor" href="#arg--onset-diapause-mortality"></a></dt>
<dd><p>Pass custom or precalculated phenological
events to the model. See <code><a href="create_events.html">create_events</a></code> to find out how to create events
manually. Alternatively, the return value of <code><a href="get_events.html">get_onset_rst()</a></code>,
<code><a href="get_events.html">get_diapause_rst()</a></code> or <code><a href="get_events.html">get_mortality_rst()</a></code>
could be used (with <code>as_doy = FALSE</code>) to extract the respective phenological event from another phenology.
In that case, that phenology must match the temporal and spatial extent of the
other inputs.</p></dd>


<dt id="arg--submodels">.submodels<a class="anchor" aria-label="anchor" href="#arg--submodels"></a></dt>
<dd><p>Character vector. Specifies which submodels should be
calculated. Can be a subset of
<code>c('onset', 'diapause', 'mortality', 'development')</code>.</p></dd>


<dt id="arg--setup-only">.setup_only<a class="anchor" aria-label="anchor" href="#arg--setup-only"></a></dt>
<dd><p>If <code>TRUE</code> only the inputs will be preprocessed without
calculating any submodels. The preprocessed data can be used as input for
other <code>phenology()</code> calls and can be accessed via <code><a href="get_input_data.html">get_input_data()</a></code>.</p></dd>


<dt id="arg--stations">.stations<a class="anchor" aria-label="anchor" href="#arg--stations"></a></dt>
<dd><p>Assign stations to the phenology. See <code><a href="stations.html">stations_create()</a></code> for details.</p></dd>


<dt id="arg--storage">.storage<a class="anchor" aria-label="anchor" href="#arg--storage"></a></dt>
<dd><p>If set, the path specified here will be used to save the
(intermediate) results. If <code>phenology()</code> is called successively with a
growing amount of data, the calculations will continue where they stopped.
This can save calculation time especially for large raster inputs. Note that
this will only work of raster inputs and if <code><a href="https://rspatial.github.io/terra/reference/sources.html" class="external-link">terra::sources()</a></code> is not empty.
Otherwise the results of the calculations will be saved but successive
calculations are not possible. If no input data is passed, the phenology
will be loaded from the storage.</p></dd>


<dt id="arg--quiet">.quiet<a class="anchor" aria-label="anchor" href="#arg--quiet"></a></dt>
<dd><p>If <code>TRUE</code>, messages are suppressed.</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>Parameters that will be passed to the model. Must be named according
to the model inputs. See <code>.data</code> for alternative ways to pass data to the model.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A phenology as a list. Look <a href="analyse.phenology.html">here</a> to find out how
a phenology can be analysed. It is not recommended to access the list elements directly.</p>
    </div>
    <div class="section level2">
    <h2 id="functions">Functions<a class="anchor" aria-label="anchor" href="#functions"></a></h2>

<ul><li><p><code>bso_phenology()</code>: As BSO works a bit different than the other models, a seperate
phenology function is implemented for this model. Note that while the
onset and the development submodels are needed to be taken from BSO,
the diapause and the mortality submodels are compatible with other models.</p>
<p>The function returns a BSO phenology as a list. Look <a href="analyse.phenology.bso.html">here</a> to find out how
a BSO phenology can be analysed. It is not recommended to access the list elements directly.
To be able to use the functions that are
available for phenology objects returned by <code>phenology()</code>, call <code><a href="bso_translate_phenology.html">bso_translate_phenology()</a></code>.</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="model.bso.apply.html">model.bso.apply</a></code>, <code><a href="model.phenips.apply.html">model.phenips.apply</a></code>, <code><a href="model.rity.apply.html">model.rity.apply</a></code>, <code><a href="model.chapy.apply.html">model.chapy.apply</a></code>, <code><a href="model.joensson.apply.html">model.joensson.apply</a></code>, <code><a href="model.lange.apply.html">model.lange.apply</a></code>, <code><a href="model.phenips_clim.apply.html">model.phenips_clim.apply</a></code></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># \donttest{</span></span></span>
<span class="r-in"><span><span class="co"># calculate phenology</span></span></span>
<span class="r-in"><span><span class="va">p</span> <span class="op">&lt;-</span> <span class="fu">phenology</span><span class="op">(</span><span class="st">'phenips-clim'</span>, <span class="fu"><a href="barrks_data.html">barrks_data</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> === <span style="font-weight: bold;">calculate phenology with model `phenips-clim`</span> ===</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> -- <span style="font-weight: bold;">setup</span> --</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> parameter fly</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> parameter dd_onset</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> parameter dd_onset_alt</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> parameter btmean</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> parameter btmax</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> parameter teff</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> &gt; <span style="font-style: italic;">calculate amplitude</span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> &gt; <span style="font-style: italic;">get effective temperature from temperature/amplitude</span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> -- <span style="font-weight: bold;">onset</span> --</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> &gt; <span style="font-style: italic;">calculate the base onset</span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> &gt; <span style="font-style: italic;">add 0 degree days to get the onset of the first 10 % beetles</span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> -- <span style="font-weight: bold;">diapause</span> --</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> -- <span style="font-weight: bold;">mortality</span> --</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> -- <span style="font-weight: bold;">development</span> --</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> &gt; <span style="font-style: italic;">generation 1</span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> &gt; <span style="font-style: italic;">generation 2</span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># plot calculated generations</span></span></span>
<span class="r-in"><span><span class="va">gens</span> <span class="op">&lt;-</span> <span class="fu"><a href="get_generations.html">get_generations_rst</a></span><span class="op">(</span><span class="va">p</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">terra</span><span class="fu">::</span><span class="fu"><a href="https://rspatial.github.io/terra/reference/plot.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">gens</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="phenology-1.png" alt="" width="700" height="576"></span>
<span class="r-in"><span><span class="co"># }</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Jakob Jentschke, FVA BW, Abt. Waldschutz.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.9000.</p>
</div>

    </footer></div>





  </body></html>

